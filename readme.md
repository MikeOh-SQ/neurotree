# 🎄 NeuroTree: 뇌파 기반 크리스마스 트리 분석기

이 프로젝트는 Muse 2 등의 장치로 수집된 EEG Raw 데이터를 분석하여 **뇌파 리듬 점유율**에 따라 **동적으로 변화하는 크리스마스 트리**를 시각화하는 웹 애플리케이션입니다.

**실제 서비스 주소:** [https://neurotree.streamlit.app/](https://www.google.com/url?sa=E&source=gmail&q=https://neurotree.streamlit.app/ "null")

## 🌟 주요 기능 및 특징 (업데이트 내역 포함)

이 앱은 단순한 시각화를 넘어, 전문적인 뇌파 전처리 과정을 거쳐 신뢰성 있는 결과를 제공합니다.

1. **배치 분석 (1분):**
   
   - 업로드된 데이터에서 **앞 15초를 제외**한 **1분** 분량의 데이터를 추출하여 분석합니다.

2. **강력한 잡음 제거 필터:**
   
   - **재참조 (Referencing):** TP9/TP10 평균을 기준으로 AF7/AF8 채널의 공통 모드 잡음을 제거합니다.
   
   - **HPF (0.5Hz):** 느린 드리프트 및 DC 오프셋 제거.
   
   - **LPF (45Hz):** 근육 움직임(EMG)으로 인한 고주파 잡음 제거.

3. **최적화된 뇌파 대역 정의:**
   
   - **EOG 회피:** 눈 깜빡임(EOG) 잡음의 영향을 줄이기 위해 델타파 대역을 **3.0Hz ~ 4.0Hz**로 재정의하여 분석합니다.

4. **트리 시각화 로직 (Alpha/Theta 기반):**
   
   - 단순 파워가 아닌 **Alpha/Theta 비율**을 계산하여 사용자의 **집중도와 이완 상태(Flow State)**를 트리의 밝기와 활동성으로 매핑합니다.

5. **편의 기능:** GitHub 샘플 파일 다운로드 및 적용 기능 제공.

## 🔬 분석 로직 상세

### 1. 필터링 및 전처리 (`eeg_analyzer.py`)

| 필터/기술          | 역할               | 상세 설정                         |
| -------------- | ---------------- | ----------------------------- |
| **재참조**        | 공통 모드 및 환경 잡음 상쇄 | EEGcorr​=EEGraw​−(TP9+TP10)/2 |
| **하이패스 (HPF)** | 느린 드리프트 제거       | 0.5Hz                         |
| **로우패스 (LPF)** | 근육(EMG) 잡음 제거    | 45.0Hz                        |

### 2. 뇌파 대역 정의

| 뇌파 리듬     | 주파수 대역   | 주파수 범위 (수정됨)  |
| --------- | -------- | ------------- |
| **Delta** | 깊은 수면/잡음 | 3.0Hz∼4.0Hz   |
| **Theta** | 졸음/창의성   | 4.0Hz∼8.0Hz   |
| **Alpha** | 이완/안정 집중 | 8.0Hz∼13.0Hz  |
| **Beta**  | 각성/활동/긴장 | 13.0Hz∼30.0Hz |
| **Gamma** | 고차 인지 처리 | 30.0Hz∼45.0Hz |

## 📂 파일 구조 및 실행

### 1. 파일 구조

```
neurotree/├── app.py              # Streamlit UI, 파일 처리, 시각화 매핑 로직├── eeg_analyzer.py     # EEG 데이터 분석 핵심 DSP 로직 (수정 완료)├── requirements.txt    # Streamlit, numpy, scipy, pandas 등 의존성 목록└── README.md           # 현재 파일
```

### 2. 로컬 실행 방법

1. **환경 설정:**
   
   ```
   pip install -r requirements.txt
   ```

2. **앱 실행:**
   
   ```
   streamlit run app.py
   ```
